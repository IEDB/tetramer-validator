<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>README</title>
  <style>
    .example-pic {
      max-width: 75%;
    }
  </style>
</head>

<body>
  <h1 id="toc_0">MHC Multimer documentation</h1>

  <h2 id="toc_1">Table of Contents</h2>

  <ul>
    <li><a href="#description">Description</a></li>
    <li><a href="#installation">Installation</a>

      <ul>
        <li><a href="#command-line">Command Line</a></li>
        <li><a href="#local-web-server">Local Web Server</a></li>
        <li><a href="#docker-image">Docker image</a></li>
      </ul>
    </li>
    <li><a href="#usage-and-instructions">Usage and Instructions</a>

      <ul>
        <li><a href="#general-usage-instructions">General Usage Instructions</a></li>
        <li><a href="#command-line-1">Command Line</a></li>
        <li><a href="#web-form">Web Form</a></li>
      </ul>
    </li>
    <li><a href="#examples">Examples</a>

      <ul>
        <li><a href="#valid-entry">Valid Entry</a></li>
      </ul>
    </li>
    <li><a href="#contact-information">Contact Information</a></li>
  </ul>

  <h2 id="toc_2">Description</h2>

  <p>The <a href="http://tools.iedb.org/mhcmultimer">Multimer Validation Tool</a> is...</p>

  <p>[TODO: Add abstract/link to paper]</p>

  <h2 id="toc_3">Installation</h2>

  <h3 id="toc_4">Command Line</h3>

  <p>If you would like to run the validator tool on the command line, please clone the Git repository and install using <code>pip</code></p>

  <div>
    <pre><code class="language-none">git clone https://github.com/IEDB/tetramer-validator.git
cd tetramer-validator
pip install .</code></pre>
  </div>

  <p>To confirm installation run <code>tv -h</code></p>

  <h3 id="toc_5">Local Web Server</h3>

  <p><strong>Flask is a prerequisite for running this validator on a local web server.</strong></p>

  <p>If you would like to run the validator on a local web server, please follow the instructions for setting up the command line usage. </p>

  <p>Then install Flask by entering in the following command:</p>

  <div>
    <pre><code class="language-none">pip install -r requirements.txt
cd tetramer_validator
export FLASK_APP=server.py
flask run</code></pre>
  </div>

  <p>By default, Flask will launch applications on <a href="http://127.0.0.1:5000">http://127.0.0.1:5000</a>.</p>

  <p>Enter this address in your browser.</p>

  <h3 id="toc_6">Docker image</h3>

  <p>If you wish to run the validator in a Docker container, please use the Dockerfile from the Git repo to build the image. </p>

  <p>Please download the Git repo. </p>

  <div>
    <pre><code class="language-none">git clone https://github.com/IEDB/tetramer-validator.git
cd tetramer-validator/tetramer_validator
</code></pre>
  </div>

  <p>In <code>server.py</code>, uncomment lines <code>220-221</code> to have the app run on <a href="http://0.0.0.0:5000">http://0.0.0.0:5000</a>.</p>

  <p>Then build the Docker image.</p>

  <div>
    <pre><code class="language-none">cd tetramer-validator
docker build -t mhcmultimer:latest .
docker run -p 5000:5000 mhcmultimer:latest</code></pre>
  </div>

  <p>Navigate to your web browser to load the Web form at <a href="http://0.0.0.0:5000">http://0.0.0.0:5000</a>.</p>

  <h2 id="toc_7">Usage and Instructions</h2>

  <h3 id="toc_8">General Usage Instructions</h3>

  <ol>
    <li>Please enter MHC molecule and peptide sequence. Both of these fields are required. Optionally, one can enter modification information.</li>
    <li>MHC molecule name should be chosen to conform to <a href="https://www.ebi.ac.uk/ols/ontologies/mro">MHC Restriction ontology</a>.</li>
    <li>Modification Position field should be a comma separated list of amino acid letter followed by position number (e.g. F1, S10, S300). Each modification position should be of the format <code>&lt;amino acid&gt;&lt;position&gt;</code></li>
    <li>Modification type should be chosen to conform to <a href="https://www.ebi.ac.uk/ols/ontologies/mod">PSI-MOD ontology</a>.<br></li>
    <li>Either modification position <strong>and</strong> modification type must be provided or no modification information should be entered.</li>
    <li>There should be equal number of modification positions and modification types.</li>
    <li>NULL is not an appropriate value for any field. Please leave empty if there is no appropriate value.</li>
  </ol>

  <h3 id="toc_9">Command Line</h3>

  <p>The tool allows you to run command line validation on a table of MHC Multimer entries that is saved as Excel Spreadsheet (<code>.xlsx</code>), a tab-separated file (<code>.tsv</code>), or a comma-separated file (<code>.csv</code>). </p>

  <div>
    <pre><code class="language-none">usage: tv [-h] [-o OUTPUT] filename

positional arguments:
  filename              Please enter .tsv, .csv, or .xlsx filename and that
                        the following is in the header row: Peptide Sequence,
                        Modification Type, Modification Position, MHC Molecule

optional arguments:
  -h, --help            show this help message and exit
  -o OUTPUT, --output OUTPUT
                        Enter output file text name.</code></pre>
  </div>

  <h3 id="toc_10">Web Form</h3>

  <p>In order to assist user, the MHC Molecule and Modification Type fields output suggestions that conform to MHC Restriction ontology and PSI-MOD ontology, respectively. Please use the suggested names to ensure successful validation.</p>

  <h2 id="toc_11">Examples</h2>

  <h3 id="toc_12">Valid Entry</h3>

  <p>See below for an example on entering an entry into the web form.</p>

  <ul>
    <li>MHC Molecule: HLA-A*02:01</li>
    <li>Peptide Sequence: NLVPMVATV</li>
    <li>Modification Type: Oxidation</li>
    <li>Modification Position: M5</li>
  </ul>

  <p><img class="example-pic" src="{{url_for('static',filename='Example_1_1.png')}}" alt="1"></p>

  <ul>
    <li>Notice that the the display name of for Oxidation is oxidized residue for Oxidation. Please choose from the display names or else validation will not be successful. </li>
    <li>Notice that syntax of M5. The modification is at the position 5 and the amino acid is methionine.<br></li>
  </ul>

  <h2 id="toc_13">Contact Information</h2>

  <ul>
    <li><a href="https://github.com/IEDB/tetramer-validator/issues">Issue Tracker</a></li>
    <li><a href="mailto:help@iedb.org">Email</a></li>
  </ul>

</body>

</html>